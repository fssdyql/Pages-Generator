<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ç½‘é¡µåŠ å¯†ç”Ÿæˆå™¨ (AES)</title>
    <!-- å¼•å…¥åŠ å¯†åº“ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        body { font-family: sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; line-height: 1.6; }
        textarea { width: 100%; height: 200px; margin-bottom: 10px; font-family: monospace; border: 1px solid #ccc; padding: 10px; }
        input { padding: 10px; width: 300px; border: 1px solid #ccc; }
        button { padding: 10px 20px; background: #2563eb; color: white; border: none; cursor: pointer; font-weight: bold; }
        button:hover { background: #1d4ed8; }
        .step { margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
        h3 { margin-top: 0; }
    </style>
</head>
<body>

    <div class="step">
        <h3>1. ç²˜è´´åŸæœ¬çš„ HTML ä»£ç </h3>
        <p>æŠŠHTMLä»£ç ç²˜è´´åˆ°ä¸‹é¢ï¼š</p>
        <textarea id="originalHtml" placeholder="åœ¨æ­¤ç²˜è´´åŸæ¥çš„ä»£ç ..."></textarea>
    </div>

    <div class="step">
        <h3>2. è®¾ç½®è®¿é—®å¯†é’¥</h3>
        <input type="text" id="password" placeholder="è¾“å…¥è®¾å®šçš„å¯†ç ">
    </div>

    <div class="step">
        <h3>3. ç”ŸæˆåŠ å¯†ç½‘é¡µ</h3>
        <button onclick="generate()">ğŸ”’ ç”ŸæˆåŠ å¯†ä»£ç </button>
        <p>å¤åˆ¶ä¸‹é¢çš„ä»£ç ï¼Œä¿å­˜ä¸º <code>index.html</code> å¹¶ä¸Šä¼ åˆ° GitHub Pagesï¼š</p>
        <textarea id="finalHtml" readonly placeholder="åŠ å¯†åçš„ä»£ç å°†å‡ºç°åœ¨è¿™é‡Œ..."></textarea>
    </div>

    <script>
        function generate() {
            const content = document.getElementById('originalHtml').value;
            const pass = document.getElementById('password').value;

            if (!content || !pass) {
                alert("è¯·å¡«å†™æºä»£ç å’Œå¯†ç ï¼");
                return;
            }

            // ä½¿ç”¨ AES åŠ å¯†å†…å®¹
            const encrypted = CryptoJS.AES.encrypt(content, pass).toString();

            // ç”Ÿæˆæœ€ç»ˆçš„ HTML æ¨¡æ¿
            const template = `<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å—ä¿æŠ¤çš„é¡µé¢</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"><\/script>
<style>
    body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;background:#f8fafc;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;color:#334155}
    .login-box{background:#fff;padding:40px;border-radius:16px;box-shadow:0 10px 25px -5px rgba(0,0,0,0.1);text-align:center;width:90%;max-width:320px}
    h2{margin-top:0;margin-bottom:20px;font-size:18px;color:#1e293b}
    input{width:100%;padding:12px;margin-bottom:16px;border:1px solid #cbd5e1;border-radius:8px;box-sizing:border-box;outline:none;transition:0.2s}
    input:focus{border-color:#2563eb;box-shadow:0 0 0 3px rgba(37,99,235,0.1)}
    button{width:100%;padding:12px;background:#2563eb;color:white;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:0.2s}
    button:hover{background:#1d4ed8}
    .err{color:#ef4444;font-size:13px;margin-top:10px;display:none}
</style>
</head>
<body>
<div class="login-box" id="loginUI">
    <h2>ğŸ”’ è¯·è¾“å…¥è®¿é—®å¯†é’¥</h2>
    <input type="password" id="key" placeholder="è¾“å…¥å¯†é’¥..." onkeyup="if(event.key==='Enter')unlock()">
    <button onclick="unlock()">æŸ¥çœ‹å†…å®¹</button>
    <div class="err" id="errMsg">å¯†é’¥é”™è¯¯ï¼Œè§£å¯†å¤±è´¥</div>
</div>
<script>
    // è¿™æ˜¯åŠ å¯†åçš„æ•°æ®ï¼Œæ²¡æœ‰å¯†ç ç»å¯¹æ— æ³•è¿˜åŸ
    const secretData = "${encrypted}";

    function unlock() {
        const key = document.getElementById('key').value;
        try {
            // å°è¯•è§£å¯†
            const bytes = CryptoJS.AES.decrypt(secretData, key);
            const originalText = bytes.toString(CryptoJS.enc.Utf8);
            
            if (!originalText) throw new Error("è§£å¯†ç»“æœä¸ºç©º"); // å¯†ç é”™è¯¯é€šå¸¸ä¼šå¯¼è‡´è½¬æ¢å¤±è´¥æˆ–ä¹±ç 
            
            // å†™å…¥æ–‡æ¡£
            document.open();
            document.write(originalText);
            document.close();
        } catch (e) {
            console.error(e);
            const err = document.getElementById('errMsg');
            err.style.display = 'block';
            err.innerText = "å¯†é’¥é”™è¯¯";
            // ç®€å•çš„æŠ–åŠ¨åŠ¨ç”»
            const box = document.querySelector('.login-box');
            box.style.transform = 'translateX(5px)';
            setTimeout(()=>box.style.transform='translateX(0)', 100);
            setTimeout(()=>box.style.transform='translateX(-5px)', 200);
            setTimeout(()=>box.style.transform='translateX(0)', 300);
        }
    }
<\/script>
</body>
</html>`;

            document.getElementById('finalHtml').value = template;
        }
    </script>
</body>
</html>